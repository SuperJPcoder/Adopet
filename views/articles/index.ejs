<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Adopet Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Font awesome icon -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oregano:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="../stylesheets/article.css">
    <link rel="stylesheet" href="/stylesheets/likes.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  </head>
    <header>
      <%- include('../partials/flash') %>
      <div id="nav">
        <div id="nav-part1">
            <!-- <p>logo</p> -->
            <a href = "/" class = "navbar-brand">Adopet</a>
        </div>
        <div id="nav-part2">
            <div id="links">
                <a href = "/donate">Donate</a>
                <a href = "/adopt">Adopt</a>
                <a href = "">Get to vet</a>
                <a href = "/articles">Blog</a>
                <a href = "/events">events</a>
                <% if(!currentUser) { %>
                <a href = "/signup">Sign up</a>
                <a href = "/login">Log in</a>
                <% }else{ %>
                <a href = "/logout">Log out</a>
                <% } %>
            </div>
        </div>
    </div>

      <div class = "banner">
        <div class = "container">
          <h1 class = "banner-title">
            <span>Blog</span>
            <img src="../images/banner-bg.jpg" alt="">
          </h1>
          <p>everything that you want to know about your pets</p>
          <!-- <img src = "https://staging.petmag.com/wp-content/uploads/2020/08/category-header-cats.jpg" -->
        </div>
      </div>
    </header>
    <!-- end of header -->
    
    <!-- design -->
    <section class="container">
      <form>
        <i class="fas fa-search"></i>
        <input type="text" name="" id="search-item" placeholder="Search blogs">
      </form>

      <div class="product-list">
        <div class="product">
          <img src="../images/blue.png" alt="">
          <div class="p-details">
            <h2>BLOG TITLE</h2>
            <h3>description</h3>
          </div>
        </div>
      </div>
    </section>
 

  
    <div class="scroll-tracker"></div>
    <section class = "design" id = "design">
      <div class = "container">
        <div class = "title">
          <h2>Read about Dogs & cats</h2>
          <p>recent arts & designs on the blog</p>
        </div>
        <% for(let art of aart){%>

        <div class = "design-content">
          <!-- item -->
          <!-- <div class="card"> -->
          <div class = "design-item">
            <div class="design-img">
              <a href="/articles/<%= art._id%>">
                <img src="https://plus.unsplash.com/premium_photo-1663047910718-c8758a6785e9?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="article-image">
                <!-- <label for="article-link">Article Link</label> -->
              </a>
              <span><i class="far fa-heart"></i> 22</span>
              <span>Adopet</span>
            
            </div>
            
            <div class = "design-title">
              <div class="card-content">
                <h2 class="card-title"><a href="/articles/<%= art._id%>"><%= art.title%></a></h2>
                <p class="card-description"><%= art.content%></p>
                
              </div>
            </div>
          </div>
        </div>
        </div>
        <div class="like-button">
          <div class="heart-bg">
          <div class="heart-icon"><button data-post-id="<%= art.id %>"></button></div>
      </div>
      <div class="likes-amount">7</div>
      </div>
    </section>
    <%}%>

    <!-- end of design -->


    <!-- blog -->
    <section class = "blog" id = "blog">
      <div class = "container">
        <div class = "title">
          <h2>Latest Blog</h2>
          <p>recent blogs about art & design</p>
        </div>
        <div class = "blog-content">
          <!-- item -->
          <div class = "blog-item">
            <div class = "blog-img">
              <img src = "https://images.pexels.com/photos/3171712/pexels-photo-3171712.jpeg?auto=compress&cs=tinysrgb&w=600" alt = "">
              <span><i class = "far fa-heart"></i></span>
            </div>
            <div class = "blog-text">
              <span>20 January, 2020</span>
              <h2>Lorem ipsum, dolor sit amet consectetur adipisicing</h2>
              <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Omnis libero quas ipsum laudantium nihil! Quaerat.</p>
              <a href = "#">Read More</a>
            </div>
          </div>
          <!-- end of item -->
          <!-- item -->
          <div class = "blog-item">
            <div class = "blog-img">
              <img src = "images/blog-p-2.jpg" alt = "">
              <span><i class = "far fa-heart"></i></span>
            </div>
            <div class = "blog-text">
              <span>20 January, 2020</span>
              <h2>Lorem ipsum, dolor sit amet consectetur adipisicing</h2>
              <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Omnis libero quas ipsum laudantium nihil! Quaerat.</p>
              <a href = "#">Read More</a>
            </div>
          </div>
          <!-- end of item -->
          <!-- item -->
          <div class = "blog-item">
            <div class = "blog-img">
              <img src = "images/blog-p-3.jpg" alt = "">
              <span><i class = "far fa-heart"></i></span>
            </div>
            <div class = "blog-text">
              <span>20 January, 2020</span>
              <h2>Lorem ipsum, dolor sit amet consectetur adipisicing</h2>
              <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Omnis libero quas ipsum laudantium nihil! Quaerat.</p>
              <a href = "#">Read More</a>
            </div>
          </div>
          <!-- end of item -->
          <!-- item -->
          <div class = "blog-item">
            <div class = "blog-img">
              <img src = "images/blog-p-4.jpg" alt = "">
              <span><i class = "far fa-heart"></i></span>
            </div>
            <div class = "blog-text">
              <span>20 January, 2020</span>
              <h2>Lorem ipsum, dolor sit amet consectetur adipisicing</h2>
              <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Omnis libero quas ipsum laudantium nihil! Quaerat.</p>
              <a href = "#">Read More</a>
            </div>
          </div>
          <!-- end of item -->
          <!-- item -->
          <div class = "blog-item">
            <div class = "blog-img">
              <img src = "images/blog-p-5.jpg" alt = "">
              <span><i class = "far fa-heart"></i></span>
            </div>
            <div class = "blog-text">
              <span>20 January, 2020</span>
              <h2>Lorem ipsum, dolor sit amet consectetur adipisicing</h2>
              <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Omnis libero quas ipsum laudantium nihil! Quaerat.</p>
              <a href = "#">Read More</a>
            </div>
          </div>
          <!-- end of item -->
          <!-- item -->

          <!-- end of item -->
        </div>
      </div>
    </section>
    <!-- end of blog -->


    <section class="about" id="about">
      <div class="container">
        <div class="about-content">
          <h1>Post your own blog</h1>
          <div class="content-wrapper">
            <div>
              <img src = "images/about-bg.jpg" alt = "">
            </div>
            <div>
              <!-- Dynamic upload button -->
              <label for="image-upload" class="upload-btn">Upload Image</label>
              <input type="file" id="image-upload" accept="image/*" multiple style="display: none;">
            </div>
            <div class="about-text">
              <div class="title">
                <h2>Anuv jain</h2>
                <p></p>
              </div>
              <!-- Text input area -->
              <textarea rows="20" cols="50" maxlength="5000" placeholder="Write your blog here..."></textarea>
            </div>
          </div>
        </div>
      </div>
    </section>
    

  </main>
  <script>






const form = document.querySelector('#searchForm');
form.addEventListener('submit', async function (e) {
    e.preventDefault();
    // console.log(form.elements.querySelector.value);
// console.dir(form.elements.query.value)
    const searchTerm = form.elements.query.value;
    const config = {params: {q: searchTerm}}
    const res = await axios.get(`http://localhost:3000/articles`, config);
    console.dir(res.data);
    form.elements.query.value = '';
})

const createImages = (shows) => {
    for(let s of shows){
        if(s.show.image){
            const img = document.createElement('IMG');
            img.src = s.show.image.medium;
            document.body.append(img);
        }
        
    }
}


const likeButtons = document.querySelectorAll(".like-button");

likeButtons.forEach(button => {
  const heartIcon = button.querySelector(".heart-icon");
  // const likesAmountLabel = button.querySelector(".likes-amount");
  const postId = button.dataset.postId; // Assuming the post ID is stored in a data attribute

  heartIcon.addEventListener("click", async () => {
    heartIcon.classList.toggle("liked");
    const isLiked = heartIcon.classList.contains("liked");

    // Make a POST request to the /like route on your server
    const response = await fetch('/articles', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ isLiked, postId }), // Send the post ID and whether the post is liked in the request body
    });

    if (!response.ok) {
      console.error('Error:', response.statusText);
      return;
    }

    const data = await response.json();

    // Update the likes amount label with the new likes amount from the server
    likesAmountLabel.innerHTML = data.likesAmount;
  });
}); 
  </script>

    <!-- footer -->
    <!-- end of footer -->
    
    
    <%- include('../partials/footer') %>
  </body>
</html>